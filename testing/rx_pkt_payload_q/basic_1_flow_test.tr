# Initialize the state for flow 0
0001__00__000__0000__0000__0_0000_0000_0000_0000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get empty
0010__11__0000_0000_0000_0000__0000_0000__1__000_0000_0000
# Check full
0001__01__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the full response, check that we get head and tail are 0
0010__01__0000__0000__0000_0000_0000_0000_0000_0000_0000
# Write
0001__10__000__0000__0000_0000_0000_0100__0001_0000__0_0000
# Check full
0001__01__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the full response, check that we get head = 0, tail = 1
0010__01__0000__0001__0000_0000_0000_0000_0000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_0000_0100__0001_0000__0__000_0000_0000
# Fill up the queue
0001__10__000__0001__0000_0000_0000_0000__0000_1000__0_0000
0001__10__000__0010__0000_0000_0000_1000__0001_0000__0_0000
0001__10__000__0011__0000_0000_0001_1000__0001_1000__0_0000
0001__10__000__0100__0000_0000_0011_0000__0010_0000__0_0000
0001__10__000__0101__0000_0000_0101_0000__0010_1000__0_0000
0001__10__000__0110__0000_0000_0111_1000__0011_0000__0_0000
0001__10__000__0111__0000_0000_1010_1000__0011_1000__0_0000
0001__10__000__1000__0000_0000_1110_0000__0100_0000__0_0000
# Check full
0001__01__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the full response, check that we get head = 1, tail = 9
0010__01__0001__1001__0000_0000_0000_0000_0000_0000_0000
# Drain the queue
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_0000_0000__0000_1000__0__000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_0000_1000__0001_0000__0__000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_0001_1000__0001_1000__0__000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_0011_0000__0010_0000__0__000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_0101_0000__0010_1000__0__000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_0111_1000__0011_0000__0__000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_1010_1000__0011_1000__0__000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that we get the expected thing back
0010__11__0000_0000_1110_0000__0100_0000__0__000_0000_0000
# Try to read
0001__11__000__0_0000_0000_0000_0000_0000_0000_0000_0000
# Receive the read response, check that it's empty
0010__11__0000_0000_0000_0000__0000_0000__1__000_0000_0000
# Finish
0100__00_0000_0000_0000_0000_0000_0000_0000_0000_0000